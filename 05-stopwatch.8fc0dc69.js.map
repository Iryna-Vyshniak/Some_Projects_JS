{"mappings":"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","sources":["src/app/05-stopwatch.js"],"sourcesContent":["import moment from 'moment';\n\nconst stopBtn = document.querySelector('.js-stop');\nconst stopButton = document.querySelector('.js-stop__stopwatch');\nconst startBtn = document.querySelector('.js-start');\nconst startButton = document.querySelector('.js-start__stopwatch');\nconst pauseButton = document.querySelector('.js-pause__stopwatch');\nconst stopAudio = document.querySelector('.js-audio-stop');\nconst startAudio = document.querySelector('.js-audio-start');\nconst pauseAudio = document.querySelector('.js-audio-pause');\nconst timeNow = document.querySelector('.js-time-now');\nconst clockface = document.querySelector('.stopwatch');\n\nfunction updateTime() {\n  timeNow.textContent = moment().format('dddd, MMMM Do YYYY, h:mm:ss a');\n}\n\nconst interval = setInterval(updateTime, 1000);\n\nwindow.addEventListener('unload', () => clearInterval(interval));\n\nlet timeId = null;\nlet intervalId = null;\nlet elapsedMilliseconds = 0;\nconst millisecondsInSec = 1000;\nconst secondsInMin = 60;\nconst minutesInHour = 60;\nconst hoursInDay = 24;\n\nclass Timer {\n  constructor({ onTick }) {\n    this.isActive = false;\n    this.onTick = onTick;\n  }\n\n  init() {\n    const time = this.getTimeComponents(0);\n    this.onTick(time);\n  }\n\n  start() {\n    if (this.isActive) {\n      return;\n    }\n\n    const startTime = Date.now();\n    this.isActive = true;\n    startAudio.play();\n\n    intervalId = setInterval(() => {\n      startAudio.pause();\n      const currentTime = Date.now();\n      const deltaTime = currentTime - startTime;\n      const time = this.getTimeComponents(deltaTime);\n\n      this.onTick(time);\n    }, 1000);\n  }\n\n  stop() {\n    stopAudio.play();\n    clearInterval(intervalId);\n    this.isActive = false;\n    const time = this.getTimeComponents(0);\n    this.onTick(time);\n  }\n\n  pause() {\n    if (intervalId) {\n      clearInterval(intervalId);\n      intervalId = null;\n    }\n  }\n\n  getTimeComponents(time) {\n    const hours = this.pad(\n      Math.floor((time % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))\n    );\n    const mins = this.pad(Math.floor((time % (1000 * 60 * 60)) / (1000 * 60)));\n    const secs = this.pad(Math.floor((time % (1000 * 60)) / 1000));\n\n    return { hours, mins, secs };\n  }\n\n  pad(value) {\n    return String(value).padStart(2, '0');\n  }\n}\n\nfunction updateClockface({ hours, mins, secs, milliseconds }) {\n  clockface.textContent = `${hours} : ${mins} : ${secs}`;\n}\n\nconst timer = new Timer({\n  onTick: updateClockface,\n});\n\nstartBtn.addEventListener('click', timer.start.bind(timer));\nstopBtn.addEventListener('click', timer.stop.bind(timer));\n\n// ------- next variant with 3 buttons ------------------------\n\nconst renderStopwatch = str =>\n  (document.querySelector('.stopwatch-next').innerText = str);\n\nconst begin = () => {\n  const initialDate = new Date(Date.now() - elapsedMilliseconds);\n  timeId = setInterval(() => {\n    const delta = new Date() - initialDate;\n\n    elapsedMilliseconds = delta;\n    const milliseconds = Math.floor(delta % millisecondsInSec);\n    const seconds = Math.floor((delta / millisecondsInSec) % secondsInMin);\n    const minutes = Math.floor(\n      (delta / (millisecondsInSec * secondsInMin)) % minutesInHour\n    );\n    const hours = Math.floor(\n      (delta / (millisecondsInSec * secondsInMin * minutesInHour)) % hoursInDay\n    );\n    const days = Math.floor(\n      delta / (millisecondsInSec * secondsInMin * minutesInHour * hoursInDay)\n    );\n\n    const UISeconds = String(seconds).padStart(2, '0');\n    const UIMinutes = String(minutes).padStart(2, '0');\n    const UIHours = String(hours).padStart(2, '0');\n\n    const stopwatcherFormat = `${days} days ${UIHours} : ${UIMinutes} : ${UISeconds} : ${milliseconds}`;\n\n    renderStopwatch(stopwatcherFormat);\n  }, 0);\n};\n\nconst pauseStopwatch = () => {\n  if (timeId) {\n    clearInterval(timeId);\n    timeId = null;\n  }\n};\n\nconst interrupt = () => {\n  pauseStopwatch();\n  elapsedMilliseconds = 0;\n  renderStopwatch('0 days 00:00:00:000');\n};\n\nstartButton.addEventListener('click', e => {\n  startAudio.play();\n  if (timeId) {\n    pauseStopwatch();\n  } else {\n    begin();\n  }\n});\n\npauseButton.addEventListener('click', e => {\n  pauseAudio.play();\n  if (timeId) {\n    pauseStopwatch();\n  } else {\n    begin();\n  }\n});\n\nstopButton.addEventListener('click', e => {\n  stopAudio.play();\n  pauseStopwatch();\n  elapsedMilliseconds = 0;\n  renderStopwatch('0 days 00 : 00 : 00 : 000');\n});\n"],"names":["$cxTnx","parcelRequire","$e741cc9c7fc0a09d$var$stopBtn","document","querySelector","$e741cc9c7fc0a09d$var$stopButton","$e741cc9c7fc0a09d$var$startBtn","$e741cc9c7fc0a09d$var$startButton","$e741cc9c7fc0a09d$var$pauseButton","$e741cc9c7fc0a09d$var$stopAudio","$e741cc9c7fc0a09d$var$startAudio","$e741cc9c7fc0a09d$var$pauseAudio","$e741cc9c7fc0a09d$var$timeNow","$e741cc9c7fc0a09d$var$clockface","$e741cc9c7fc0a09d$var$interval","setInterval","textContent","$parcel$interopDefault","format","window","addEventListener","clearInterval","$e741cc9c7fc0a09d$var$timeId","$e741cc9c7fc0a09d$var$intervalId","$e741cc9c7fc0a09d$var$elapsedMilliseconds","$e741cc9c7fc0a09d$var$timer","init","time","this","getTimeComponents","onTick","start","isActive","startTime","Date","now","play","pause","deltaTime","stop","pad","Math","floor","value","String","padStart","constructor","hours","mins","secs","milliseconds","bind","$e741cc9c7fc0a09d$var$renderStopwatch","str","innerText","$e741cc9c7fc0a09d$var$begin","initialDate","delta","seconds","minutes","days","UISeconds","UIMinutes","UIHours","$e741cc9c7fc0a09d$var$pauseStopwatch","e"],"version":3,"file":"05-stopwatch.8fc0dc69.js.map"}