{"mappings":"0iBACAA,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAEXD,EAAQE,QACR,SAAyBC,EAAUC,GAC/B,KAAMD,aAAoBC,GACtB,MAAM,IAAIC,UAAU,oC,WCG5B,SAASC,EAAkBC,EAAQC,GAC/B,IAAI,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAI,CACjC,IAAIE,EAAaH,EAAMC,GACvBE,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWE,cAAe,EACtB,UAAWF,IAAYA,EAAWG,UAAW,GACjDhB,OAAOC,eAAeQ,EAAQI,EAAWI,IAAKJ,E,EAftDb,OAAOC,eAAeiB,EAAS,aAAc,CACzCf,OAAO,IAEXe,EAAQd,QACR,SAAsBE,EAAaa,EAAYC,GACvCD,GAAYX,EAAkBF,EAAYe,UAAWF,GACrDC,GAAaZ,EAAkBF,EAAac,GAChD,OAAOd,C,mBCNLgB,EAAUC,SAASC,cAAc,YACjCC,EAAaF,SAASC,cAAc,uBACpCE,EAAWH,SAASC,cAAc,aAClCG,EAAcJ,SAASC,cAAc,wBACrCI,EAAcL,SAASC,cAAc,wBACrCK,EAAYN,SAASC,cAAc,kBACnCM,EAAaP,SAASC,cAAc,mBACpCO,EAAaR,SAASC,cAAc,mBACpCQ,EAAUT,SAASC,cAAc,gBACjCS,EAAYV,SAASC,cAAc,cAMzC,IAAMU,EAAWC,aAJjB,WACEH,EAAQI,YAAcC,EAAAC,EAAA,GAASC,OAAO,gC,GAGC,KAEzCC,OAAOC,iBAAiB,UAAU,W,OAAMC,cAAcR,E,IAEtD,IAAIS,EAAS,KACTC,EAAa,KACbC,EAAsB,EACpBC,EAAoB,IAqE1B,IAAMC,EAAQ,IAJX,W,sBA5DGC,EACQC,G,IAAAC,EAAAD,EAAEC,O,aACZC,KAAKC,UAAW,EAChBD,KAAKD,OAASA,C,iBAGhBjC,IAAA,O,MAAA,WACE,IAAMoC,EAAOF,KAAKG,kBAAkB,GACpCH,KAAKD,OAAOG,E,IAGdpC,IAAA,Q,MAAA,W,WACE,IAAIkC,KAAKC,SAAT,CAIA,IAAMG,EAAYC,KAAKC,MACvBN,KAAKC,UAAW,EAChBtB,EAAW4B,OAEXd,EAAaT,aAAY,WACvBL,EAAW6B,QACX,IACMC,EADcJ,KAAKC,MACOF,EAC1BF,EAAOQ,EAAKP,kBAAkBM,GAEpCC,EAAKX,OAAOG,E,GACX,IAdD,C,IAiBJpC,IAAA,O,MAAA,WACEY,EAAU6B,OACVhB,cAAcE,GACdO,KAAKC,UAAW,EAChB,IAAMC,EAAOF,KAAKG,kBAAkB,GACpCH,KAAKD,OAAOG,E,IAGdpC,IAAA,Q,MAAA,WACM2B,IACFF,cAAcE,GACdA,EAAa,K,IAIjB3B,IAAA,oB,MAAA,SAAkBoC,GAOhB,MAAO,CAAES,MANKX,KAAKY,IACjBC,KAAKC,MAAMZ,EAAS,MAAyB,OAK/Ba,KAHHf,KAAKY,IAAIC,KAAKC,MAAMZ,EAAS,KAAoB,MAGxCc,KAFThB,KAAKY,IAAIC,KAAKC,MAAMZ,EAAS,IAAc,M,IAK1DpC,IAAA,M,MAAA,SAAId,GACF,OAAOiE,OAAOjE,GAAOkE,SAAS,EAAG,I,OAIlC,GAIW,CAAU,CACtBnB,OALF,SAAyBD,G,IAAEa,EAAFb,EAAEa,MAAOI,EAATjB,EAASiB,KAAMC,EAAflB,EAAekB,KAAflB,EAAqBqB,aAC5CrC,EAAUG,YAAc,GAAcmC,OAAXT,EAAM,OAAeS,OAAVL,EAAK,OAAUK,OAALJ,E,IAOlDzC,EAASe,iBAAiB,QAASM,EAAMyB,MAAMC,KAAK1B,IACpDzB,EAAQmB,iBAAiB,QAASM,EAAM2B,KAAKD,KAAK1B,IAIlD,IAAM4B,EAAkB,SAAAC,G,OACrBrD,SAASC,cAAc,mBAAmBqD,UAAYD,C,EAEnDE,EAAQ,WACZ,IAAMC,EAAc,IAAIvB,KAAKA,KAAKC,MAAQZ,GAC1CF,EAASR,aAAY,WACnB,IAAM6C,EAAQ,IAAIxB,KAASuB,EAE3BlC,EAAsBmC,EACtB,IAAMV,EAAeN,KAAKC,MAAMe,EAAQlC,GAClCmC,EAAUjB,KAAKC,MAAMe,EAASlC,EAvFnB,IAwFXoC,EAAUlB,KAAKC,MACnBe,EAAU,IAxFM,IA0FZlB,EAAQE,KAAKC,MACjBe,EAAU,KA1FG,IA4FTG,EAAOnB,KAAKC,MAChBe,EAAS,OAGLI,EAAYhB,OAAOa,GAASZ,SAAS,EAAG,KACxCgB,EAAYjB,OAAOc,GAASb,SAAS,EAAG,KACxCiB,EAAUlB,OAAON,GAAOO,SAAS,EAAG,KAEpCkB,EAAoB,GAAgBhB,OAAbY,EAAK,UAAqBZ,OAAbe,EAAQ,OAAoBf,OAAfc,EAAU,OAAoBd,OAAfa,EAAU,OAAkBb,OAAbD,GAErFK,EAAgBY,E,GACf,E,EAGCC,EAAiB,WACjB7C,IACFD,cAAcC,GACdA,EAAS,K,EAUbhB,EAAYc,iBAAiB,SAAS,SAAAgD,GACpC3D,EAAW4B,OACPf,EACF6C,IAEAV,G,IAIJlD,EAAYa,iBAAiB,SAAS,SAAAgD,GACpC1D,EAAW2B,OACPf,EACF6C,IAEAV,G,IAIJrD,EAAWgB,iBAAiB,SAAS,SAAAgD,GACnC5D,EAAU6B,OACV8B,IACA3C,EAAsB,EACtB8B,EAAgB,4B","sources":["node_modules/@swc/helpers/lib/_class_call_check.js","node_modules/@swc/helpers/lib/_create_class.js","src/app/05-stopwatch.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classCallCheck;\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _createClass;\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nfunction _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\n","import moment from 'moment';\n\nconst stopBtn = document.querySelector('.js-stop');\nconst stopButton = document.querySelector('.js-stop__stopwatch');\nconst startBtn = document.querySelector('.js-start');\nconst startButton = document.querySelector('.js-start__stopwatch');\nconst pauseButton = document.querySelector('.js-pause__stopwatch');\nconst stopAudio = document.querySelector('.js-audio-stop');\nconst startAudio = document.querySelector('.js-audio-start');\nconst pauseAudio = document.querySelector('.js-audio-pause');\nconst timeNow = document.querySelector('.js-time-now');\nconst clockface = document.querySelector('.stopwatch');\n\nfunction updateTime() {\n  timeNow.textContent = moment().format('dddd, MMMM Do YYYY, h:mm:ss a');\n}\n\nconst interval = setInterval(updateTime, 1000);\n\nwindow.addEventListener('unload', () => clearInterval(interval));\n\nlet timeId = null;\nlet intervalId = null;\nlet elapsedMilliseconds = 0;\nconst millisecondsInSec = 1000;\nconst secondsInMin = 60;\nconst minutesInHour = 60;\nconst hoursInDay = 24;\n\nclass Timer {\n  constructor({ onTick }) {\n    this.isActive = false;\n    this.onTick = onTick;\n  }\n\n  init() {\n    const time = this.getTimeComponents(0);\n    this.onTick(time);\n  }\n\n  start() {\n    if (this.isActive) {\n      return;\n    }\n\n    const startTime = Date.now();\n    this.isActive = true;\n    startAudio.play();\n\n    intervalId = setInterval(() => {\n      startAudio.pause();\n      const currentTime = Date.now();\n      const deltaTime = currentTime - startTime;\n      const time = this.getTimeComponents(deltaTime);\n\n      this.onTick(time);\n    }, 1000);\n  }\n\n  stop() {\n    stopAudio.play();\n    clearInterval(intervalId);\n    this.isActive = false;\n    const time = this.getTimeComponents(0);\n    this.onTick(time);\n  }\n\n  pause() {\n    if (intervalId) {\n      clearInterval(intervalId);\n      intervalId = null;\n    }\n  }\n\n  getTimeComponents(time) {\n    const hours = this.pad(\n      Math.floor((time % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))\n    );\n    const mins = this.pad(Math.floor((time % (1000 * 60 * 60)) / (1000 * 60)));\n    const secs = this.pad(Math.floor((time % (1000 * 60)) / 1000));\n\n    return { hours, mins, secs };\n  }\n\n  pad(value) {\n    return String(value).padStart(2, '0');\n  }\n}\n\nfunction updateClockface({ hours, mins, secs, milliseconds }) {\n  clockface.textContent = `${hours} : ${mins} : ${secs}`;\n}\n\nconst timer = new Timer({\n  onTick: updateClockface,\n});\n\nstartBtn.addEventListener('click', timer.start.bind(timer));\nstopBtn.addEventListener('click', timer.stop.bind(timer));\n\n// ------- next variant with 3 buttons ------------------------\n\nconst renderStopwatch = str =>\n  (document.querySelector('.stopwatch-next').innerText = str);\n\nconst begin = () => {\n  const initialDate = new Date(Date.now() - elapsedMilliseconds);\n  timeId = setInterval(() => {\n    const delta = new Date() - initialDate;\n\n    elapsedMilliseconds = delta;\n    const milliseconds = Math.floor(delta % millisecondsInSec);\n    const seconds = Math.floor((delta / millisecondsInSec) % secondsInMin);\n    const minutes = Math.floor(\n      (delta / (millisecondsInSec * secondsInMin)) % minutesInHour\n    );\n    const hours = Math.floor(\n      (delta / (millisecondsInSec * secondsInMin * minutesInHour)) % hoursInDay\n    );\n    const days = Math.floor(\n      delta / (millisecondsInSec * secondsInMin * minutesInHour * hoursInDay)\n    );\n\n    const UISeconds = String(seconds).padStart(2, '0');\n    const UIMinutes = String(minutes).padStart(2, '0');\n    const UIHours = String(hours).padStart(2, '0');\n\n    const stopwatcherFormat = `${days} days ${UIHours} : ${UIMinutes} : ${UISeconds} : ${milliseconds}`;\n\n    renderStopwatch(stopwatcherFormat);\n  }, 0);\n};\n\nconst pauseStopwatch = () => {\n  if (timeId) {\n    clearInterval(timeId);\n    timeId = null;\n  }\n};\n\nconst interrupt = () => {\n  pauseStopwatch();\n  elapsedMilliseconds = 0;\n  renderStopwatch('0 days 00:00:00:000');\n};\n\nstartButton.addEventListener('click', e => {\n  startAudio.play();\n  if (timeId) {\n    pauseStopwatch();\n  } else {\n    begin();\n  }\n});\n\npauseButton.addEventListener('click', e => {\n  pauseAudio.play();\n  if (timeId) {\n    pauseStopwatch();\n  } else {\n    begin();\n  }\n});\n\nstopButton.addEventListener('click', e => {\n  stopAudio.play();\n  pauseStopwatch();\n  elapsedMilliseconds = 0;\n  renderStopwatch('0 days 00 : 00 : 00 : 000');\n});\n"],"names":["Object","defineProperty","$665014edacbfe17b$exports","value","default","instance","Constructor","TypeError","$74e7f8130373505f$var$_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","$74e7f8130373505f$exports","protoProps","staticProps","prototype","$a240c3278a262ce0$var$stopBtn","document","querySelector","$a240c3278a262ce0$var$stopButton","$a240c3278a262ce0$var$startBtn","$a240c3278a262ce0$var$startButton","$a240c3278a262ce0$var$pauseButton","$a240c3278a262ce0$var$stopAudio","$a240c3278a262ce0$var$startAudio","$a240c3278a262ce0$var$pauseAudio","$a240c3278a262ce0$var$timeNow","$a240c3278a262ce0$var$clockface","$a240c3278a262ce0$var$interval","setInterval","textContent","$parcel$interopDefault","$jR9u2","format","window","addEventListener","clearInterval","$a240c3278a262ce0$var$timeId","$a240c3278a262ce0$var$intervalId","$a240c3278a262ce0$var$elapsedMilliseconds","$a240c3278a262ce0$var$millisecondsInSec","$a240c3278a262ce0$var$timer","Timer","param","onTick","this","isActive","time","getTimeComponents","startTime","Date","now","play","pause","deltaTime","_this","hours","pad","Math","floor","mins","secs","String","padStart","milliseconds","concat","start","bind","stop","$a240c3278a262ce0$var$renderStopwatch","str","innerText","$a240c3278a262ce0$var$begin","initialDate","delta","seconds","minutes","days","UISeconds","UIMinutes","UIHours","stopwatcherFormat","$a240c3278a262ce0$var$pauseStopwatch","e"],"version":3,"file":"05-stopwatch.8695f938.js.map"}